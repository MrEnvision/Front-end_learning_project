<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3000port</title>
</head>
<body>
<button id="btn">跨域访问</button>
<div>This msg is 3000port. Need 8080 port</div>
<iframe id="iframe" src="http://localhost:8080/index2.html"></iframe>
<script type="text/javascript">
    const iframe = document.getElementById('iframe');
    const btn = document.getElementById('btn');
    btn.addEventListener('click', function postMsg() {
        iframe.contentWindow.postMessage('This msg is from 3000port', 'http://localhost:8080')
    })
    window.onmessage = function (e) {
        if (e.origin !== 'http://localhost:8080') alert('error')
        const div = document.getElementsByTagName('div')[0]
        div.innerText = e.data
    }
</script>

</body>
</html>
